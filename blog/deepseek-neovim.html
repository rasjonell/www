<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>How To Use DeepSeek R1 In NeoVim - Gurgen.zip</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <meta name="description" content="Running a local AI model (DeepSeek R1) in Neovim for enhanced code assistance." />
    <meta name="keywords" content="vim,ai,gpt" />
    <meta name="author" content="Gurgen Hayrapetyan" />
    <link href="/styles.css" rel="stylesheet" />
    <style>
      pre[class*="language-"] {
        background: #3c3836;
        padding: 1em;
        margin: .5em 0;
        overflow: auto;
        border-radius: 0.3em;
      }
      
      code[class*="language-"] {
        font-family: "Fira Code", monospace;
        white-space: pre;
        tab-size: 4;
      }
      
      .dark pre[class*="language-"] {
        background: #1d2021;
      }

      .prose {
        color: inherit;
      }
      
      .prose h1 {
        font-size: 2.25rem;
        margin-top: 2rem;
        margin-bottom: 1rem;
        font-weight: 700;
        color: #b57614;
        line-height: 1.2;
      }
      
      .dark .prose h1 {
        color: #fe8019;
      }
      
      .prose h2 {
        font-size: 1.875rem;
        margin-top: 2rem;
        margin-bottom: 1rem;
        font-weight: 700;
        color: #b57614;
        line-height: 1.3;
      }
      
      .dark .prose h2 {
        color: #fe8019;
      }
      
      .prose h3 {
        font-size: 1.5rem;
        margin-top: 1.5rem;
        margin-bottom: 0.75rem;
        font-weight: 600;
        color: #b57614;
        line-height: 1.4;
      }
      
      .dark .prose h3 {
        color: #fe8019;
      }
      
      .prose h4 {
        font-size: 1.25rem;
        margin-top: 1.5rem;
        margin-bottom: 0.75rem;
        font-weight: 600;
        color: #b57614;
        line-height: 1.4;
      }
      
      .dark .prose h4 {
        color: #fe8019;
      }
      
      .prose p {
        margin-top: 1.25em;
        margin-bottom: 1.25em;
        line-height: 1.6;
      }
      
      .prose ul {
        margin-top: 1.25em;
        margin-bottom: 1.25em;
        padding-left: 1.625em;
        list-style-type: disc;
      }
      
      .prose ol {
        margin-top: 1.25em;
        margin-bottom: 1.25em;
        padding-left: 1.625em;
        list-style-type: decimal;
      }
      
      .prose li {
        margin-top: 0.5em;
        margin-bottom: 0.5em;
      }
      
      .prose a {
        color: #d65d0e;
        text-decoration: underline;
      }
      
      .dark .prose a {
        color: #fe8019;
      }
      
      .prose blockquote {
        border-left: 4px solid #d5c4a1;
        padding-left: 1rem;
        margin: 1.5rem 0;
        font-style: italic;
        color: #665c54;
      }
      
      .dark .prose blockquote {
        border-left-color: #504945;
        color: #bdae93;
      }

     .prose pre {
        background-color: #3c3836;
        color: #ebdbb2;
        padding: 1rem;
        border-radius: 0.375rem;
        margin: 1rem 0;
        white-space: pre-wrap;
        word-wrap: break-word;
        overflow-wrap: break-word;
        max-width: 100%;
      }     
      
      .dark .prose pre {
        background-color: #1d2021;
      }
      
      .prose code {
        color: rgb(254, 128, 25);
        font-weight: 600;
        font-size: 0.875em;
      }
      
      .prose pre code {
        color: #ebdbb2;
        font-weight: 400;
        font-size: 0.875em;
        white-space: pre-wrap;
        word-wrap: break-word;
        overflow-wrap: anywhere;
      }
    </style>
  </head>
  <body>
    <div class="min-h-screen flex flex-col bg-[#fbf1c7] text-[#3c3836] dark:bg-[#282828] dark:text-[#ebdbb2] font-mono">
      <header class="p-4 bg-[#ebdbb2] dark:bg-[#3c3836]">
        <nav class="container mx-auto flex justify-between items-center">
          <a href="/blog.html">
            <h1 class="text-2xl font-bold text-[#b57614] dark:text-[#fe8019]">&larr; Blog</h1>
          </a>
        </nav>
      </header>

      <main class="flex-grow container mx-auto px-4 py-8">
        <article class="prose dark:prose-invert max-w-none">
          <h1 class="text-4xl font-bold mb-4 text-[#b57614] dark:text-[#fe8019]">How To Use DeepSeek R1 In NeoVim</h1>
          <div class="mb-4">
            <time class="text-sm text-[#7c6f64] dark:text-[#a89984]">January 22, 2025</time>
            <div class="text-sm text-[#7c6f64] dark:text-[#a89984]">Tags: vim,ai,gpt</div>
          </div>
          <h2>Using DeepSeek R1 In NeoVim</h2>
<p>Sharing the steps I took to use DeepSeek R1 with Avante.nvim</p>
<h4>1. Download Ollama</h4>
<p>You can download Ollama using the following command:</p>
<pre><code class="language-bash">curl -fsSL https://ollama.com/install.sh | sh
</code></pre>
<p>Alternatively, you can download it from the official website for MacOS or Windows:<br><a href="https://ollama.com/download">https://ollama.com/download</a>.</p>
<h4>2. Pull the DeepSeek Model</h4>
<p>Run the following command to pull the DeepSeek R1 model:</p>
<pre><code class="language-bash">ollama pull deepseek-r1:14b
</code></pre>
<p><em>Note:</em> I use the 14B model, which works very fast on my system (NVIDIA 4090 Super with 32GB RAM). Make sure<br>you have sufficient RAM based on the model size:</p>
<ul>
<li>At least <strong>8 GB</strong> for 7B models</li>
<li>At least <strong>16 GB</strong> for 13B models</li>
<li>At least <strong>32 GB</strong> for 33B models</li>
</ul>
<h4>3. Run Ollama on Startup</h4>
<p>To ensure Ollama runs when your system starts, you need to run <code>ollama serve</code> on startup.<br>There are a couple of ways to achieve this:</p>
<h5>3.1 Using cron with <code>@reboot</code></h5>
<p>You can add a cron job to run <code>ollama serve</code> at boot using the <code>@reboot</code> special string.</p>
<ul>
<li>Open the crontab file:<pre><code class="language-bash">sudo crontab -e
</code></pre>
</li>
<li>Add the following line to run <code>ollama serve</code> on reboot:<pre><code>@reboot /usr/bin/ollama serve
</code></pre>
</li>
<li>Save and exit. On most systems, this will ensure <code>ollama serve</code> starts at boot.</li>
</ul>
<p><em>NOTE:</em> You can achieve this also using <code>/etc/rc.local</code>, or by adding a init script to <code>/etc/init.d</code>,<br>or write a systemd service and enable it:</p>
<ul>
<li><p>Create a new service file in <code>/etc/systemd/system/ollama.service</code>:</p>
<pre><code class="language-bash">sudo vim /etc/systemd/system/ollama.service
</code></pre>
</li>
<li><p>Add the following content to the file:</p>
<pre><code class="language-ini">[Unit]
Description=Ollama AI Server
After=network.target remote-fs.target syslog.target

[Service]
ExecStart=/usr/bin/ollama serve
Restart=always
User=root

[Install]
WantedBy=multi-user.target
</code></pre>
</li>
<li><p>Enable and start the service:</p>
<pre><code class="language-bash">sudo systemctl enable ollama.service
sudo systemctl start ollama.service
</code></pre>
</li>
</ul>
<h4>4. Download Avante.nvim for LazyVim Users</h4>
<p>Add the following plugin configuration to your Neovim config.<br><em>(Follow <a href="https://github.com/yetone/avante.nvim?tab=readme-ov-file#installation">this link</a> for more installation guides.)</em></p>
<pre><code class="language-lua">{
    &quot;yetone/avante.nvim&quot;,
    lazy = false,
    version = false,
    event = &quot;VeryLazy&quot;,
    opts = {
        provider = &quot;ollama&quot;,
        auto_suggestions_provider = &quot;ollama&quot;,

        vendors = {
            ollama = {
                api_key_name = &quot;&quot;,
                model = &quot;deepseek-r1:14b&quot;,
                __inherited_from = &quot;openai&quot;,
                endpoint = &quot;http://127.0.0.1:11434/v1&quot;,
            },
        },

        suggestion = {
            next = &quot;&lt;M-]&gt;&quot;,
            prev = &quot;&lt;M-[&gt;&quot;,
            accept = &quot;&lt;M-h&gt;&quot;,
            dismiss = &quot;&lt;C-]&gt;&quot;,
        },
    },
    build = &quot;make&quot;,
    dependencies = {
        &quot;hrsh7th/nvim-cmp&quot;,
        &quot;MunifTanjim/nui.nvim&quot;,
        &quot;nvim-lua/plenary.nvim&quot;,
        &quot;stevearc/dressing.nvim&quot;,
        &quot;zbirenbaum/copilot.lua&quot;,
        &quot;nvim-tree/nvim-web-devicons&quot;,
        {
            &#39;MeanderingProgrammer/render-markdown.nvim&#39;,
            opts = {
                file_types = { &quot;markdown&quot;, &quot;Avante&quot; },
            },
            ft = { &quot;markdown&quot;, &quot;Avante&quot; },
        },
        {
            &quot;HakonHarnes/img-clip.nvim&quot;,
            event = &quot;VeryLazy&quot;,
            opts = {
                default = {
                    use_absolute_path = true,
                    prompt_for_file_name = false,
                    embed_image_as_base64 = false,
                    drag_and_drop = {
                        insert_mode = true,
                    },
                },
            },
        },
    },
}
</code></pre>

        </article>
      </main>

      <footer class="bg-[#ebdbb2] dark:bg-[#3c3836] p-4 text-center">made with ❤️</footer>
    </div>
  </body>
</html>